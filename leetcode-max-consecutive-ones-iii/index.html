<!DOCTYPE html>
<html>
  
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">

    <title>LeetCode: Max Consecutive Ones III</title>

    
    
    <meta name="description" content="&lt;p&gt;Explanation and solution for LeetCode: Max Consecutive Ones III, Cpp/Java/Python.&lt;/p&gt;">
    <link rel="canonical" href="http://coderscat.com/leetcode-max-consecutive-ones-iii/" />
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="LeetCode: Max Consecutive Ones III">
    <meta property="og:description" content="&lt;p&gt;Explanation and solution for LeetCode: Max Consecutive Ones III, Cpp/Java/Python.&lt;/p&gt;">
    <meta property="og:url" content="http://coderscat.com/leetcode-max-consecutive-ones-iii/" />
    <meta property="og:site_name" content="Coder's Cat">
    <meta property="article:publisher" content="https://www.facebook.com/coderscat">
    <meta property="article:tag" content="">
    <meta property="article:section" content="">
    <meta property="article:published_time" content="2020-11-19 10:43:00">
    <meta property="article:modified_time" content="2020-11-19 10:43:00">
    <meta property="og:updated_time" content="2020-11-19 10:43:00">
    <meta property="og:image" content="http://coderscat.com/images/logo-show.png"/>
    <meta property="og:image:secure_url" content="http://coderscat.com/images/logo-show.png"/>
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="400">
    <meta property="og:image:alt" content="CodersCat">
    <meta property="og:image:type" content="image/jpeg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LeetCode: Max Consecutive Ones III">
    <meta name="twitter:description" content="&lt;p&gt;Explanation and solution for LeetCode: Max Consecutive Ones III, Cpp/Java/Python.&lt;/p&gt;">
    <meta name="twitter:site" content="@coderscat">
    <meta name="twitter:creator" content="@coderscat">
    <meta name="twitter:image" content="http://coderscat.com/images/logo-show.png"/>



    <link rel="icon" type="image/png" sizes="32x32" href="/css/images/favicon-32x32.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/css/images/favicon-16x16.ico">

    <title>
        
            LeetCode: Max Consecutive Ones III | Coder&#39;s Cat
        
    </title>  
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/fonts.css">

    
<link rel="stylesheet" href="/css/plugins/code.css">

    
<link rel="stylesheet" href="/css/plugins/nprogress.min.css">

    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


    
<script src="/js/jquery.min.js"></script>

  <script type="text/javascript" src="/js/geopattern.min.js"></script>
  <script type="text/javascript" src="/js/nprogress.min.js"></script>


  <script type="text/javascript" async src="https://platform-api.sharethis.com/js/sharethis.js#property=5fa8f493be36290012aa2a0d&product=inline-share-buttons"></script>

  <div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
      <img src="/css/images/logo.png" width='400px' height='400px'/>
  </div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-77282254-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-77282254-2');
</script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Coder's Cat" type="application/atom+xml">
</head>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Coder's Cat</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/data-structures/" class="item-link">D&S</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/algorithms/" class="item-link">Algo</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/programming-languages/" class="item-link">PL</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/system/" class="item-link">System</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tools/" class="item-link">Tools</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      <li class="list-item" style="margin: 0">
       <a class="icon-small" href="/search">
        <span class="fa-stack fa-lg">
          <i class="fa fa-search fa-stack-1x fa-inverse" style="color:pink"></i>
        </span>
       </a>
      </li>

      <li class="list-item" style="margin: 0">
        <a class="icon-small" href="/atom.xml">
         <span class="fa-stack fa-lg">
           <i class="fa fa-rss fa-inverse" style="color:orange"></i>
         </span>
        </a>
       </li>
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/data-structures/" class="menu-link">D&S</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/algorithms/" class="menu-link">Algo</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/programming-languages/" class="menu-link">PL</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/system/" class="menu-link">System</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tools/" class="menu-link">Tools</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        


        <li class="list-item" style="margin: 0">
          <a class="icon-small" href="/search">
           <span class="fa-stack">
             <i class="fa fa-search"></i>
           </span>
          </a>
         </li>

         
      <li class="list-item" style="margin: 0">
        <a class="icon-small" href="/atom.xml">
         <span class="fa-stack fa-lg">
           <i id="rss-icon" class="fa fa-rss fa-inverse"></i>
         </span>
        </a>
       </li>

      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>LeetCode: Max Consecutive Ones III</h2>
  <p class="post-date">2020-11-19</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content">
      
<span id="more"></span>

<p>Given an array A of 0s and 1s, we may change up to K values from 0 to 1.</p>
<p>Return the length of the longest (contiguous) subarray that contains only 1s.  </p>
<p>Example 1:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Input: A &#x3D; [1,1,1,0,0,0,1,1,1,1,0], K &#x3D; 2<br>Output: 6<br><br>Explanation: <br>[1,1,1,0,0,1,1,1,1,1,1]<br>Bolded numbers were flipped from 0 to 1.  The longest subarray is underlined.<br></code></pre></td></tr></table></figure>
<h2 id="Naive-solution"><a href="#Naive-solution" class="headerlink" title="Naïve solution"></a>Naïve solution</h2><p>The naïve solution is enumerate all the range pairs of array, check whether we have a consecutive sub-array to meet the required property. </p>
<p>The time complexity is: <code>O(N^3)</code>.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">longestOnes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; A, <span class="hljs-keyword">int</span> K)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;A.size(); i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=i; j&lt;A.size(); j++) &#123;<br>                <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k=i; k&lt;=j; k++) &#123;<br>                    <span class="hljs-keyword">if</span>(A[k] == <span class="hljs-number">0</span>) <span class="hljs-comment">//change to 1</span><br>                        count++;<br>                    <span class="hljs-keyword">if</span>(count &lt;= K)<br>                        ans = max(ans, k-i+<span class="hljs-number">1</span>);<br>                    <span class="hljs-keyword">else</span> <br>                        <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>Of course, this is a very slow solution, and we will get time-limit exceed.</p>
<h2 id="Solution-with-approach-of-two-pointers"><a href="#Solution-with-approach-of-two-pointers" class="headerlink" title="Solution with approach of two-pointers"></a>Solution with approach of two-pointers</h2><p>In the previous solution, there are duplicated computation. For example, <code>[1~5]</code> will contains the computation of <code>[1~4]</code>, <code>[1~3]</code> etc.</p>
<p>An simpler solution is called two-pointers approach.</p>
<p>We define two variables called<code>l</code> and <code>r</code> to store the left-index and right-index of a window. What we need to do is keep the required property and move <code>l</code> or <code>r</code> according to current status.</p>
<p>We can use a <code>count</code> to store the number of 0s in the window. When the number of 0s in the window is greater than K, we need to shrink the window. In every iteration, we compare the window size with the final result to determine whether to update the result.</p>
<p>Time complexity: <code>O(n)</code><br>Space complexity: <code>O(1)</code></p>
<h3 id="Cpp"><a href="#Cpp" class="headerlink" title="Cpp"></a>Cpp</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">longestOnes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; A, <span class="hljs-keyword">int</span> K)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> max_count = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> r = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(r &lt; A.size()) &#123; <br>            <span class="hljs-keyword">int</span> v = A[r];<br>            <span class="hljs-keyword">if</span>(A[r] == <span class="hljs-number">0</span>) count++;<br>            <span class="hljs-keyword">while</span>(count &gt; K) &#123;<br>                <span class="hljs-keyword">if</span>(A[l] == <span class="hljs-number">0</span>)<br>                    count--;<br>                l++;<br>            &#125;<br>            ans = max(ans, r - l + <span class="hljs-number">1</span>);<br>            r++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">longestOnes</span><span class="hljs-params">(<span class="hljs-keyword">int</span>[] A, <span class="hljs-keyword">int</span> K)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> max = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> left = <span class="hljs-number">0</span>, right = <span class="hljs-number">0</span>; right &lt; A.length; right++) &#123;<br>        <span class="hljs-keyword">if</span> (A[right] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> (K == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">while</span> (A[left] == <span class="hljs-number">1</span>) &#123;<br>                    left++;<br>                &#125;<br>                left++;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                K--;<br>            &#125;<br>        &#125;<br>        max = Math.max(right - left + <span class="hljs-number">1</span>, max);<br>    &#125;<br>    <span class="hljs-keyword">return</span> max;<br>&#125;<br><br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">longestOnes_concise</span>(<span class="hljs-params">A, K</span>):</span><br>    left,right,count = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span> <br>    <span class="hljs-keyword">for</span> right <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(A)):<br>        <span class="hljs-keyword">if</span> A[right] == <span class="hljs-number">0</span>:<br>            count += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> count &gt; K:<br>            <span class="hljs-keyword">if</span> A[left] == <span class="hljs-number">0</span>:<br>                count -= <span class="hljs-number">1</span><br>            left += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> right-left+<span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure>



<p><strong><a target="_blank" rel="noopener" href="https://amzn.to/2BeAeB9">Preparing for an interview? Check out this!</a></strong></p>

    </section>

     <div>
          <p style="text-align:center; color: #12472d; margin-left: 2%; margin-right: 2%;"><b>Join my <a target="_blank" rel="noopener" href="http://codercat.substack.com">Email List</a> for more insights, It's Free!&#128523;	</b></p>
          <iframe src="https://codercat.substack.com/embed" width="96%" height="350" style="border:2px solid #EEE; background:rgb(248, 244, 244); margin-left: 2%; margin-right: 2%;" frameborder="1" scrolling="no"></iframe>
      </div>
    
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Array" >
    <span class="tag-code-index">Array</span>
  </a>

  <a href="/tags#LeetCode" >
    <span class="tag-code-index">LeetCode</span>
  </a>

  <a href="/tags#DP" >
    <span class="tag-code-index">DP</span>
  </a>


      </div>
    

    <div class="sharethis-inline-share-buttons"></div>

    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/leetcode-max-consecutive-ones-ii/">
        <span class="nav-arrow">← </span>
        
          LeetCode: Max Consecutive Ones II
        
      </a>
    
    
        <a class="nav-right" href="/leetcode-coin-change/">
            
                LeetCode: Coin Change
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>


    <!-- NAV END -->

    <script src="https://utteranc.es/client.js"
            repo="nickmose8/coderscat-comments"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>

  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
      <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title"></strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Naive-solution"><span class="toc-nav-text">Naïve solution</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Solution-with-approach-of-two-pointers"><span class="toc-nav-text">Solution with approach of two-pointers</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Cpp"><span class="toc-nav-text">Cpp</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Java"><span class="toc-nav-text">Java</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Python"><span class="toc-nav-text">Python</span></a></li></ol></li></ol>
    
  </div>
</aside>

  
  <!-- Catalog END -->

</main>




<script>
  (function () {
    var url = 'http://coderscat.com/leetcode-max-consecutive-ones-iii/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer" id="footer">
    <p class="copyright">
        &copy; 2023 | CodersCat
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
 var hasLine = 'false';
 async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
     $('figure pre').each(function(i, block) {
         var figure = $(this).parents('figure');
         if (hasLine === 'false') {
             figure.find('.gutter').hide();
         }
         var lang = figure.attr('class').split(' ')[1] || 'code';
         var codeHtml = $(this).html();
         var codeTag = document.createElement('code');
         codeTag.className = lang;
         codeTag.innerHTML = codeHtml;
         $(this).attr('class', '').empty().html(codeTag);
         figure.attr('data-lang', lang.toUpperCase());
     });
 })
</script>

<script src="/js/script.js"></script>


  </body>
</html>